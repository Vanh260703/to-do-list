<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lịch Sử Hoạt Động</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <style>
    body {
      background: #f5f7fa;
      font-family: 'Segoe UI', sans-serif;
    }
    .container {
      max-width: 900px;
      margin: 40px auto;
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.05);
    }
    .log-entry {
      border-left: 4px solid #0d6efd;
      padding-left: 16px;
      margin-bottom: 20px;
      position: relative;
    }
    .log-entry::before {
      content: '';
      width: 12px;
      height: 12px;
      background-color: #0d6efd;
      border-radius: 50%;
      position: absolute;
      left: -8px;
      top: 8px;
    }
    .log-entry.create { border-color: #198754; }
    .log-entry.create::before { background-color: #198754; }

    .log-entry.update { border-color: #ffc107; }
    .log-entry.update::before { background-color: #ffc107; }

    .log-entry.delete { border-color: #dc3545; }
    .log-entry.delete::before { background-color: #dc3545; }

    .log-entry.complete { border-color: #0dcaf0; }
    .log-entry.complete::before { background-color: #0dcaf0; }

    .log-entry.restore { border-color: #6f42c1; }
    .log-entry.restore::before { background-color: #6f42c1; }

    .log-header {
      font-size: 1rem;
      font-weight: 600;
    }

    .log-time {
      font-size: 0.85rem;
      color: #6c757d;
    }

    .log-icon {
      margin-right: 6px;
    }

    .back-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
    }
  </style>
</head>
<body>
 <div class="container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-primary mb-0">
      <i class="fas fa-history me-2"></i>Lịch Sử Hoạt Động
    </h2>
    <form action="/me/logs/clear" method="POST" onsubmit="return confirm('Bạn có chắc chắn muốn xóa toàn bộ lịch sử hoạt động không?')">
      <button type="submit" class="btn btn-outline-danger">
        <i class="fas fa-trash-alt me-1"></i>Xóa lịch sử
      </button>
    </form>
  </div>

  {{#if logs.length}}
    {{#each logs}}
      <div class="log-entry {{this.action}}">
        <div class="log-header">
          {{#if (eq this.action "create")}}<i class="fas fa-plus-circle text-success log-icon"></i>
          {{else if (eq this.action "update")}}<i class="fas fa-edit text-warning log-icon"></i>
          {{else if (eq this.action "force-delete")}}<i class="fas fa-times-circle text-danger log-icon"></i>
          {{else if (eq this.action "delete")}}<i class="fas fa-trash-alt text-danger log-icon"></i>
          {{else if (eq this.action "complete")}}<i class="fas fa-check-circle text-info log-icon"></i>
          {{else if (eq this.action "restore")}}<i class="fas fa-undo-alt text-purple log-icon"></i>
          {{else}}<i class="fas fa-info-circle log-icon"></i>
          {{/if}}
          {{this.message}}
        </div>
        <div class="log-time">
          <i class="fas fa-clock me-1"></i>{{formatDate1 this.createdAt}}
        </div>
      </div>
    {{/each}}
  {{else}}
    <div class="alert alert-info">
      <i class="fas fa-info-circle me-1"></i> Chưa có hoạt động nào được ghi nhận.
    </div>
  {{/if}}
</div>

<a href="/me/dashboard" class="btn btn-primary rounded-pill back-btn">
  <i class="fas fa-arrow-left me-1"></i>Dashboard
</a>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>
